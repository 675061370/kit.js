(function(e){var n=this;var t=document.location.host,i=Object.prototype.toString;var r=Array.prototype,o=Object.prototype,c=Function.prototype;var f=r.push,s=r.pop,a=n.location.href,u=r.slice;var l=function(e){if(e instanceof l){return e}if(!(this instanceof l)){return new l(e)}this._wrapped=e};fn=l.fn=l.prototype;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=l}exports.kit=l}else{n.kit=l}l.isUndefined=function(e){if(typeof e==="undefined"){return true}return false};var d={isObject:"[object Object]",isArray:"[object Array]",isBoolean:"[object Boolean]",isFunction:"[object Function]",isString:"[object String]",isMath:"[object Math]",isDate:"[object Date]",isNull:"[object Null]",isRegExp:"[object RegExp]",isNumber:"[object Number]",isError:"[object Error]"};var p=function(e){for(var n in e){l[n]=function(n){return function(t){return i.call(t)===e[n]}}(n)}};p(d);l.each=l.forEach=function(e,n,t){if(l.isObject(e)||l.isFunction(e)){for(var i in e){n(e[i],i)}}else if(l.isArray(e)){var i=0;for(;i<e.length;i++){n(e[i],i)}}};l.isEmpty=function(e){var n=true;if(l.isObject(e)){l.some(e,function(){n=false;return false})}else if(l.isArray(e)){if(e.length>0){n=false}}return n};l.some=function(e,n){var t="";if(l.isObject(e)){for(var i in e){t=n(e[i],i);if(t===false){return false}}}else if(l.isArray(e)){for(var i=0;i<e.length;i++){t=n(e[i],i);if(t===false){return false}}}return true};l.splitSpace=function(e){return e.split(/\s+/g)};l.trim=function(e,n){var t="";if(n===true){t=e.replace(/\s/g,"");return t}if(l.isString(e)===true){t=e.replace(/((^\s*)|(\s*$))/g,"")}else{throw Error("需要解析的并不是字符串")}return t};var h=function(e,n,t,i){var r=n,o=[],c={},f=null,s=null,a="";if(typeof r=="string"&&r.length!=0){if(i){r=r.search(/^\?/g)!==-1?r.substring(1):r}o=r.split(t);l.forEach(o,function(e,n){a=e.split("=");f=l.trim(a[0]);s=l.trim(a[1]);c[f]=s})}if(!!e){c=c[e]}return c};l.locaSearch=function(e,t){t=t||n.location.search;var i=h(e,t,"&",true);return i};l.cookie=function(e,t){var i=t||n.document.cookie,r="";if(i.slice(-1)===";"){i=i.slice(0,-1)}r=h(e,i,";",false);return r};var v=function(e,n){var t=arguments.callee,i=e instanceof Array?[]:{};l.forEach(n,function(e,t){i[t]=n[t]});l.forEach(e,function(r,o){if(l.isObject(e[o])||l.isArray(e[o])){i[o]=t(e[o],n[o])}else{i[o]=e[o]}});return i};l.mixin=function(){var e,n,t,i=0,r={},o=arguments.length;if(typeof arguments[i]==="boolean"){n=arguments[i];i++}t=arguments[i];for(;i<o;i++){e=arguments[i];if(n==true){r=v(e,t);l.forEach(r,function(e,n){t[n]=e})}else{l.forEach(e,function(e,n){t[n]=e})}}return t};l.query=function(e){return document.querySelector(e)};l.querys=function(e){return document.querySelectorAll(e)};var m;l.CLIENT_USERID=m=l.cookie("userid");l.CLIENT_VERSION=l.cookie("version")?l.cookie("version").split(".").slice(-1)[0]:"";l.ta=function(e,n){var n=n||"mousedown";function t(e){if(l.isObject(e)){if(typeof $==="function"){l.forEach(e,function(e,t){if(e!==""&&e!==[]){$(document).on(n,e,function(){TA.log({id:t,ld:"client",client_userid:m,send_time:""})})}})}}else if(l.isArray(e)){l.forEach(e,function(e,n){TA.log({id:e,ld:"client",client_userid:m,send_time:""})})}}if(typeof TA==="undefined"){console.warn("未引入TA.js,正在动态加载标签");l.addScript("/thsft/js/ta.min.js",function(){t(e)});return}t(e)};l.addScript=function(e,n){var t=document.createElement("script");t.type="text/javascript";t.src=e;var i="onload"in t;if(i){t.onload=function(){n()}}else{t.onreadystatechange=function(){if(t.readyState==="loaded"||t.readyState==="complete"){n()}}}document.body.appendChild(t)};l.bind=function(e,n){var t=null;if(l.isFunction(n)){t=function(){return n.apply(e,arguments)}}else{t=n}return t};l.Model=function(e){if(this instanceof l.Model){var n=this;this._options=e}else{return new l.Model(e)}};l.Model.prototype={constructor:l.Model,self:function(){return this._options},get:function(e){return this._options[e]},set:function(e){var n=this._isChanged(this._options,e),t=l.mixin(true,this._options,e);if(n===false){this.change(t)}return t},change:function(e){console.log("mode发生了变动")},_isChanged:function(e,n){return l(n).some(function(n,t){return n==e[t]})}};l.Controller=function(e){if(this instanceof l.Controller){var n=l.bind(this,function(e,n){this[n]=l.bind(this,e)});l.forEach(e,n)}else{return new l.Controller(e)}};l.Controller.prototype={constructor:l.Controller,callback:function(e){var n=e.argue;var t=e.callback;var i=this;var r=[];l.forEach(t,function(e,n){if(l.isFunction(i[e])){r.push(i[e])}else{console.info("有回调列队项不是函数")}});this.deliver(r,n)},deliver:function(e,n){l.forEach(e,function(e){e.apply(1,n)})}};l.View=function(e){if(this instanceof l.View){this._current=e.current||document;this._eventsFunction=e.eventsFunction;this.bindEvent(e.events);e.initialize()}else{return new l.View(e)}};l.View.prototype={constructor:l.View,bindEvent:function(n){var t=function(n,t){var i="",r=null,o=l.splitSpace(l.trim(n));if(o.length===1){i="click";r=o[0]}else if(o.length>=2){i=o[0];r=o[1]}if(this._eventsFunction[r]===e){throw Error(r+"函数不存在")}$(this._current).on(i,t,this._eventsFunction[r])};t=l.bind(this,t);l.each(n,t)}};l.ajaxInit=function(e){$.ajaxSetup({dataType:"json",beforeSend:function(){if(l.isFunction(e.before)){e.before()}},type:"GET",complete:function(){if(l.isFunction(e.complete)){e.complete()}},error:function(e,n,t){console.warn("请求错误：errno="+e.status+";statusText="+e.statusText+";responseText="+e.responseText)}})};l.error=function(e){window.onerror=function(){e()}};l.chartRender=function(e,n){var t=null;if(n instanceof jQuery||n instanceof Zepto){n=n.get(0)}t=echarts.init(n);t.setOption(e,true)};l.finalExec=function(e){setTimeout(function(){e()},0)};l.triggerSuccess=function(e){var n="",t=e.response,i=e.noData,r=e.haveData;if(l.isObject(t)){n="response is object;";if(t.errno==0){n+="existence data;";console.info(n);r(t.data)}else if(t.errno&&t.errno!=0){n+="no data;";console.info(n);i()}}else{n="response is'not object;";console.warn(n)}};l.timeHandle=function(e,n,t){var i="",r="",o="",c=null;t=t||"-";e=new Date(e);c=e.setDate(e.getDate()+n);c=new Date(c);i=c.getFullYear();r=c.getMonth()+1;o=c.getDate();if(r<10){r="0"+r}if(o<10){o="0"+o}c=i+t+r+t+o;return c};l.clientCmd=function(t){if(n.API===e){l.addScript("/thsft/js/api/api.js",function(){n.API.OnClientCmd(t)});return}else{n.API.OnClientCmd(t)}};l.underToMustache=function(){_.templateSettings={interpolate:/\{\{=([\s\S]+?)\}\}/g,evaluate:/\{\{([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g}};l.tempRender=function(e,n,t,i){var e=_.template(e);var r=e(t);if(n instanceof jQuery||n instanceof Zepto){n[i||"html"](r)}else{n.innerHTML=r}};l.sort=function(){var e,n=false,t=false,i=arguments[0],r,o;if(typeof i==="string"){switch(i){case"asc":t=false;break;case"desc":t=true;break;default:throw"请传入正确的排序方式'asc'或'desc'"}r=arguments[1]}else{r=i}o=r.length-1;for(var c=0;c<o;c++){for(var f=0;f<o-c;f++){if(r[f]>r[f+1]){e=r[f+1];r[f+1]=r[f];r[f]=e;n=true}}if(n===false){break}}if(t===true){r=r.reverse()}return r};l.method=function(e){var n=[];l.forEach(e,function(e,t){if(l.isFunction(e)){n.push(t)}});return n.sort()};var y;l.route=function(t,i){var r=l.isFunction(t);var o=l.isArray(i);if(r){n.onhashchange=function(){var r=n.location.hash.substring(1);if(i!==e&&o){if(i.indexOf(r)!==-1){y=r;if(y=r){return}t(r)}}else{t(r)}}}};l.clientDown=function(e,i,r){var o=i.match(/\.(\w{2,4})?$/g);var r=o?o[0]:null||r;var c="ifind://!command=down&valuectrl=1&filename="+e+r+"&url=http://"+t+i;n.location.href=c};l.once=function(e){var n=e;if(l.isFunction(n)===false){throw"请传入函数方法"}return function(){n();n=new Function}};l.extend=l.fn.extend=function(){var e=arguments.length,n=1,t=arguments[0]||{},i=l.method(t);if(typeof t==="Boolean"){t=arguments[1]||{};n++}if(!(l.isObject(t)===true||l.isFunction(t)===true)){t={}}if(e===1){l.forEach(i,function(e,n){var i=l[e]=t[e];if(l.isUndefined(fn[e])===false){return}fn[e]=function(){var e=[this._wrapped];f.apply(e,arguments);return i.apply(l,e)}})}else{}};l.extend(l);if(typeof define==="function"&&define.amd){define("kit",[],function(){return l})}if(typeof define==="function"&&define.cmd){define(function(){return l})}}).call(this);
